<ion-header>
  <ion-toolbar color="secondary">
    <ion-buttons slot="start">
      <ion-button  (click)="addBubble()">
        <ion-icon slot="icon-only" name="add-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>BUBBLES</ion-title>
    <ion-buttons slot="end">
      <ion-button  (click)="refreshBubbles()">
        <ion-icon slot="icon-only" name="refresh-circle-outline"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content scroll-x="false" scroll-y="false">
  <div class="bubbles-content-container">
    <div style="width:100%">
      <ion-card>
        <ion-card-header class="card-header">
          <ion-card-subtitle class="text-center">
            <span style="margin-bottom: 10px !important; font-size: 14px !important;">{{app.userCtrl.user.name}}'s Bubble</span>
          </ion-card-subtitle>
        </ion-card-header>
        <div style="padding-bottom: 10px !important;">
          
        <ion-list lines="none">
          <ion-item>
            <ion-label>
              {{app.userCtrl.locationCtrl.location.locationName}} INFECTION RATE
            </ion-label>
            <ion-note slot="end" color="medium">
              <span *ngIf="app.ipc && app.userCtrl.locationCtrl.location.locationName">1 in {{app.ipc}}</span>
              <ion-spinner *ngIf="!(app.ipc && app.userCtrl.locationCtrl.location.locationName)" name="dots"></ion-spinner>
            </ion-note>
          </ion-item>
          <ion-item>
            <ion-label>TOTAL BUBBLE SIZE</ion-label>
            <ion-note slot="end" color="medium">{{app.userCtrl.user.membercount}}</ion-note>
          </ion-item>
          <ion-item >
            <ion-label>BUBBLE ACCURACY</ion-label>
            <ion-note slot="end" color="medium">
              <span *ngIf="app.bubbleCtrl.accuracy">  {{app.bubbleCtrl.accuracy}}</span>
              <ion-spinner *ngIf="!app.bubbleCtrl.accuracy" name="dots"></ion-spinner>
            </ion-note>
          </ion-item>
          <!-- <ion-item>
            <ion-label slot="start">BUBBLE RISK</ion-label>
            <ion-note slot="start" [color]="app.bubbleCtrl.users.length > 15 ? 'danger' : app.bubbleCtrl.users.length > 5 ? 'warning' : 'success'">
              {{app.bubbleCtrl.users.length > 15 ? 'HIGH' : app.bubbleCtrl.users.length > 5 ? 'MEDIUM' : 'LOW'}}
            </ion-note>
          </ion-item> -->
          <!-- <ion-item>
            <ion-label>
              <div class="risk-progress ion-text-center">
                <ion-progress-bar [value]="app.bubbleCtrl.users.length > 0 ? app.bubbleCtrl.users.length / 25 : 0" 
                                  buffer=".1" 
                                  [style]="{'--buffer-background': app.bubbleCtrl.users.length > 15 ? '#eb445a' : '#ffc409' }"
                                  [color]="app.bubbleCtrl.users.length > 15 ? 'danger' : app.bubbleCtrl.users.length > 5 ? 'warning' : 'success'">
                </ion-progress-bar>
              </div>
            </ion-label>
          </ion-item> -->
        </ion-list>

      </div>
      </ion-card>
    </div>
    <div #bubchartcontainer class="bubble-chart-container">
      <div #bubbleschart id="bubbles-chart" [style.height]="bubChartHeight" style="min-height: 50vh;"></div>
    </div>

  </div>
</ion-content>
